# 技術スタック選定

## 推奨技術スタック

### フロントエンド
- **フレームワーク**: Next.js 14+ (App Router)
  - React 18+
  - サーバーサイドレンダリング（SSR）と静的生成（SSG）に対応
  - API Routesでフルスタック開発が可能
  - PWA対応が容易
- **言語**: TypeScript
  - 型安全性による開発効率向上
  - 大規模開発に適している
- **スタイリング**: Tailwind CSS
  - ユーティリティファーストのCSSフレームワーク
  - Zoho CRMのような細かいカスタマイズに適している
  - レスポンシブ対応が簡単
- **UIコンポーネント**: 
  - Headless UI または Radix UI（アクセシビリティ対応）
  - shadcn/ui（Tailwindベースのコンポーネントライブラリ）
- **状態管理**: 
  - React Context API（グローバル状態）
  - TanStack Query (React Query)（サーバー状態管理）
  - Zustand（軽量な状態管理、必要に応じて）
- **フォーム管理**: React Hook Form + Zod（バリデーション）
- **テーブル・リスト表示**: TanStack Table (React Table)
- **日付処理**: date-fns または Day.js

### バックエンド
- **フレームワーク**: Next.js API Routes（フロントエンドと同じ技術スタック）
  - または Laravel (PHP)
- **認証**: NextAuth.js（Next.js使用時）または Laravel Sanctum（Laravel使用時）
- **バリデーション**: Zod（Next.js）または Laravel Validation（Laravel）

### データベース
- **RDBMS**: **MySQL**（X Serverを使用）
  - X ServerのMySQLデータベースを使用
  - ローカル開発環境でもX ServerのMySQLに接続
  - ※参考: PostgreSQLも選択肢として検討可能（JSON型サポート、パフォーマンス）
- **ORM/クエリビルダー**: 
  - Prisma（Next.js使用時、MySQL対応）
  - Eloquent ORM（Laravel使用時）
- **マイグレーション**: Prisma Migrate（MySQL対応）または Laravel Migrations

### PDF生成
- **ライブラリ**: 
  - Puppeteer（HTML→PDF変換、見積書・契約書・報告書の生成に最適）
  - または PDFKit（プログラム的にPDF生成）
  - または jsPDF（クライアントサイド生成、軽量な用途）

### OCR連携
- **クライアントサイド**: Tesseract.js（無料、精度は中程度）
- **クラウドAPI**: Google Cloud Vision API または AWS Textract（高精度、有料）

### ファイルストレージ
- **画像・添付ファイル**: 
  - AWS S3 または Google Cloud Storage
  - または ローカルストレージ（小規模運用時）
- **ファイルアップロード**: next-cloudinary または AWS SDK

### PWA（オフライン対応）
- **Service Worker**: Next.js PWA Plugin
- **オフラインストレージ**: IndexedDB (via Dexie.js) または localStorage

### メール送信
- **サービス**: SendGrid または AWS SES または Resend
- **ライブラリ**: nodemailer

### デプロイ・インフラ
- **ホスティング**: 
  - Vercel（Next.js使用時、推奨）
  - または 自社サーバー（VPS/クラウド）
- **データベースホスティング**: 
  - **X ServerのMySQL**（既に構築済み）
  - または AWS RDS, Google Cloud SQL, PlanetScale等の選択（将来検討）
- **ドメイン**: manage.crane-mitsumori.com（既に取得済み）

### 開発ツール
- **パッケージマネージャー**: npm または pnpm（推奨）または yarn
- **コード品質**: ESLint, Prettier
- **型チェック**: TypeScript
- **テスト**: 
  - Jest + React Testing Library（単体テスト）
  - Playwright または Cypress（E2Eテスト）

## 技術スタック選択の理由

### Next.jsを選ぶ理由
1. **フルスタック対応**: フロントエンドとバックエンドを同じ言語（TypeScript）で開発可能
2. **パフォーマンス**: SSR/SSGにより初期表示が高速
3. **SEO**: サーバーサイドレンダリングにより検索エンジン最適化が可能
4. **開発体験**: ホットリロード、自動ルーティングなど優れた開発体験
5. **エコシステム**: Reactエコシステムとの親和性が高い
6. **PWA対応**: 簡単にPWA化可能（オフライン対応）

### TypeScriptを選ぶ理由
1. **型安全性**: コンパイル時にエラーを検出
2. **大規模開発**: チーム開発での保守性向上
3. **IDE支援**: 自動補完やリファクタリングが容易

### Tailwind CSSを選ぶ理由
1. **カスタマイズ性**: Zoho CRMのような細かいデザイン調整が容易
2. **保守性**: ユーティリティクラスで一貫性のあるスタイル
3. **パフォーマンス**: 使用しないCSSが自動的に削除される（PurgeCSS）

### MySQLを選ぶ理由（X Server使用）
1. **既存インフラ**: X ServerのMySQLを利用可能
2. **コスト**: 追加のデータベースホスティング費用が不要
3. **互換性**: 広く使われているRDBMSで互換性が高い
4. **X Server統合**: サーバーとデータベースが同じ環境で管理しやすい

※参考: PostgreSQLも選択肢として検討可能（JSON型サポート、パフォーマンスが優れている）

## 代替案：Laravelスタック

もしPHPベースで開発したい場合：

### フロントエンド
- **フレームワーク**: Laravel + Inertia.js + React/Vue
  - または Laravel + Livewire（PHPベースのリアクティブUI）
  - または Laravel API + React/Vue（SPA構成）

### バックエンド
- **フレームワーク**: Laravel 10+
- **認証**: Laravel Sanctum
- **バリデーション**: Laravel Validation

### その他
- 上記と同じ技術を使用可能

## 推奨構成（Next.js + TypeScript）

```
プロジェクト構成:
├── app/                    # Next.js App Router
│   ├── (auth)/            # 認証関連ページ
│   ├── (dashboard)/       # ダッシュボード
│   ├── api/               # API Routes
│   └── layout.tsx         # ルートレイアウト
├── components/            # Reactコンポーネント
│   ├── ui/               # 共通UIコンポーネント
│   ├── layout/           # レイアウトコンポーネント
│   └── features/         # 機能別コンポーネント
├── lib/                  # ユーティリティ・設定
│   ├── prisma/          # Prisma設定
│   ├── auth/            # 認証設定
│   └── utils/           # ヘルパー関数
├── prisma/              # Prismaスキーマ・マイグレーション
├── public/              # 静的ファイル
└── docs/                # ドキュメント
```

