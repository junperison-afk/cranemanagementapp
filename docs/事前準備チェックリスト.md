# 開発開始前の事前準備チェックリスト

## 1. 開発環境のセットアップ

### 必要なソフトウェアのインストール
- [x] **Node.js** (v18以上推奨)
  - ✅ インストール済み: v22.18.0
  - `node --version` でバージョン確認済み
- [x] **パッケージマネージャー**
  - ✅ npm（Node.jsに同梱）インストール済み
- [x] **Git**
  - ✅ インストール済み（リポジトリ初期化済み）
- [x] **コードエディタ**
  - ✅ Cursor（VS Codeベース）使用中
  - 拡張機能: ESLint, Prettier, Tailwind CSS IntelliSense（必要に応じてインストール）

### データベース環境
- [x] **データベース環境**
  - ✅ X ServerのMySQLを使用
  - ローカルインストールは不要（X ServerのMySQLに接続）
- [x] **データベースGUIツール**
  - ✅ X Serverのデータベース管理ツール（phpMyAdmin）を使用
  - X Serverのコントロールパネルからアクセス可能

## 2. プロジェクト設定ファイルの作成

### 必須ファイル
- [x] `.gitignore`（既に作成済み）
- [x] `README.md`（既に作成済み）
- [ ] `package.json`（依存関係の定義）
- [ ] `.env.example`（環境変数のテンプレート）
- [ ] `.env.local`（ローカル開発用の環境変数、`.gitignore`に含める）

### 開発ツール設定
- [ ] `.eslintrc.json`（ESLint設定）
- [ ] `.prettierrc`（Prettier設定）
- [ ] `tsconfig.json`（TypeScript設定）
- [ ] `tailwind.config.js`（Tailwind CSS設定）

## 3. データベース設計

### スキーマ設計
- [ ] **ER図の作成**
  - 設計書のデータモデル（9テーブル）を詳細化
  - リレーションシップの明確化
- [ ] **Prismaスキーマ定義**（Next.js使用時）
  - `prisma/schema.prisma` ファイル作成
  - テーブル定義、リレーション、インデックス設計

### データベース設定
- [ ] X ServerのMySQL接続情報の確認
  - ホスト名、データベース名、ユーザー名、パスワードの確認
- [ ] 接続情報の環境変数設定（`.env.local`に設定）
- [ ] X ServerのMySQLへの接続テスト
- [ ] 初期マイグレーションの準備

## 4. API設計

### RESTful APIエンドポイント設計
- [ ] **認証関連**
  - `POST /api/auth/login`
  - `POST /api/auth/logout`
  - `GET /api/auth/session`
- [ ] **取引先管理**
  - `GET /api/companies`（一覧）
  - `POST /api/companies`（作成）
  - `GET /api/companies/:id`（詳細）
  - `PUT /api/companies/:id`（更新）
  - `DELETE /api/companies/:id`（削除）
- [ ] **営業案件管理**
  - `GET /api/sales-opportunities`
  - `POST /api/sales-opportunities`
  - 等々...
- [ ] **プロジェクト管理**
  - `GET /api/projects`
  - `POST /api/projects`
  - 等々...
- [ ] **機器台帳管理**
  - `GET /api/equipment`
  - 等々...
- [ ] **点検記録管理**
  - `GET /api/inspection-records`
  - `POST /api/inspection-records`
  - 等々...

### API仕様書作成（任意）
- [ ] OpenAPI/Swagger仕様書の作成を検討

## 5. 認証・セキュリティ設計

### 認証方式の決定
- [ ] セッション認証 vs JWT認証 の選択
- [ ] NextAuth.js設定（Next.js使用時）
  - プロバイダー設定（Credentials, Google等）
  - セッション管理設定

### 権限管理
- [ ] ロール定義の詳細化
  - 管理者（admin）
  - 編集者（editor）
  - 閲覧者（viewer）
- [ ] アクセス制御ロジックの設計
  - 画面レベルでの権限チェック
  - APIレベルでの権限チェック

### セキュリティ設定
- [ ] CORS設定
- [ ] CSRF対策
- [ ] XSS対策
- [ ] SQLインジェクション対策（ORM使用で自動対応）

## 6. 外部サービス連携の準備

### OCR連携（将来実装時）
- [ ] Google Cloud Vision API または AWS Textract のアカウント作成
- [ ] APIキーの取得
- [ ] 使用量制限・コスト設定

### メール送信サービス
- [ ] SendGrid または AWS SES のアカウント作成
- [ ] APIキーの取得

### ファイルストレージ
- [ ] AWS S3 バケット作成 または Google Cloud Storage バケット作成
- [ ] アクセスキーの取得
- [ ] アップロードファイルのパス構造設計

## 7. PDF生成の準備

### PDFテンプレート設計
- [ ] 見積書テンプレート（HTML形式）
- [ ] 契約書テンプレート（HTML形式）
- [ ] 報告書テンプレート（HTML形式）
- [ ] 差し込みデータの設計（各テンプレートで使用する変数定義）

### PDF生成環境
- [ ] Puppeteerインストール
- [ ] フォント設定（日本語フォント）
- [ ] プレビュー機能の設計

## 8. デプロイ環境の準備

### 本番環境
- [ ] **ホスティングサービス**
  - Vercel（Next.js使用時、推奨）
    - https://vercel.com でアカウント作成
    - プロジェクト作成準備
  - または 自社サーバー（VPS/クラウド）
- [x] **データベースホスティング**
  - ✅ X ServerのMySQLを使用（既に構築済み）
- [ ] **ドメイン設定**
  - `manage.crane-mitsumori.com` のDNS設定
  - SSL証明書の準備（Let's Encrypt等）

### 環境変数管理
- [ ] 本番環境の環境変数リスト作成
- [ ] 環境変数管理ツールの検討（Vercelの場合は自動管理）

### CI/CD準備（任意）
- [ ] GitHub Actions または GitLab CI の設定
- [ ] 自動テスト・デプロイのパイプライン設計

## 9. 開発フロー・規約の定義

### コード規約
- [ ] コーディング規約の文書化
- [ ] ESLint/Prettier設定の統一
- [ ] 命名規則の定義（日本語コメント、英語命名）

### Git運用
- [ ] ブランチ戦略（Git Flow または GitHub Flow）
- [ ] コミットメッセージの規約
- [ ] プルリクエスト・コードレビューの流れ

### 開発タスク管理
- [ ] タスク管理ツールの選定（GitHub Issues, Trello等）
- [ ] 優先順位の定義

## 10. テスト戦略

### テスト方針
- [ ] 単体テスト（Unit Test）の範囲定義
- [ ] 統合テスト（Integration Test）の範囲定義
- [ ] E2Eテスト（End-to-End Test）の範囲定義

### テスト環境
- [ ] Jest設定
- [ ] テスト用データベースの準備
- [ ] モックデータの準備

## 11. ドキュメント整備

### 技術ドキュメント
- [x] 設計書（既存）
- [x] UI設計（既存）
- [x] 技術スタック選定（作成済み）
- [ ] API仕様書（作成予定）
- [ ] データベース設計書（作成予定）

### 運用ドキュメント
- [ ] セットアップ手順書
- [ ] デプロイ手順書
- [ ] トラブルシューティングガイド

## 優先順位

### 最優先（開発開始前に必須）
1. ✅ Gitリポジトリ初期化（完了）
2. ✅ `.gitignore`作成（完了）
3. ✅ `README.md`作成（完了）
4. ✅ Node.jsインストール（完了: v22.18.0）
5. プロジェクト初期化（Next.js等）
6. データベース設計・スキーマ作成
7. 環境変数テンプレート作成
8. 認証システムの基本実装

### 重要（初期開発フェーズで実装）
9. PDF生成機能の基本実装
10. 基本画面の実装（ログイン、ダッシュボード）

### 後回し可能
11. OCR連携
12. PWA対応
13. E2Eテスト
14. CI/CD構築

